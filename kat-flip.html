// fetchBazaarData.js - Ruft Bazaar-Daten ab
export async function fetchBazaarData() {
    const response = await fetch("https://api.hypixel.net/skyblock/bazaar");
    const data = await response.json();
    return data.products;
}

// fetchAuctionData.js - Ruft Auktionsdaten ab
export async function fetchAuctionData() {
    const response = await fetch("https://api.hypixel.net/skyblock/auctions");
    const data = await response.json();
    return data.auctions;
}

// katFlipCalculator.js - Berechnet den Kat Flip Profit
import { fetchAuctionData } from "./fetchAuctionData.js";
export async function calculateKatFlip(petName, rarity, upgradeCost, xpRequired) {
    const auctions = await fetchAuctionData();
    const upgradedPet = auctions.filter(a => a.item_name.includes(petName) && a.tier === rarity);
    if (upgradedPet.length === 0) return "No data available";
    
    const lowestPrice = Math.min(...upgradedPet.map(a => a.starting_bid));
    const xpFactor = xpRequired / 1000000; // XP-Berechnung
    return lowestPrice - (upgradeCost * xpFactor);
}
